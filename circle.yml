dependencies:
  cache_directories:
    - opencl-sdk
    - opencl-code-builder
  pre:
    - if [[ ! -e ./opencl-sdk/intel_sdk_for_opencl_2016_ubuntu_6.0.0.1049_x64 ]]; then                 mkdir opencl-sdk          && cd opencl-sdk          && wget -c http://registrationcenter-download.intel.com/akdlm/irc_nas/8555/intel_sdk_for_opencl_2016_ubuntu_6.0.0.1049_x64.tgz && tar -xzf intel_sdk_for_opencl_2016_ubuntu_6.0.0.1049_x64.tgz        && rm intel_sdk_for_opencl_2016_ubuntu_6.0.0.1049_x64.tgz        && cd ../; fi
    - if [[ ! -e ./opencl-code-builder/intel_code_builder_for_opencl_2015_ubuntu_5.0.0.43_x64 ]]; then mkdir opencl-code-builder && cd opencl-code-builder && wget -c http://registrationcenter.intel.com/irc_nas/5193/intel_code_builder_for_opencl_2015_ubuntu_5.0.0.43_x64.tgz         && tar -xzf intel_code_builder_for_opencl_2015_ubuntu_5.0.0.43_x64.tgz && rm intel_code_builder_for_opencl_2015_ubuntu_5.0.0.43_x64.tgz && cd ../; fi
    #- sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
    #- sudo apt-get update
    #- sudo apt install gcc-4.9 -y
    #- sudo apt install g++-4.9 -y
    #- sudo apt install clinfo -y
    #- sudo apt install beignet -y
    #- clinfo
    #- sudo apt-get install -y rpm alien libnuma1
test:
  override:
    - case $CIRCLE_NODE_INDEX in 0) echo "lein test:clj" && lein test:clj ;; 1) echo "lein test:cljs" && lein test:cljs ;; esac:
        parallel: true
